{% extends 'base_user.html' %}
{% load static i18n %}

{% block title %}{% trans "Pick List" %} - {{ picklist.order.order_no }}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/user/warehouse_manager/view_picklist.css' %}">
<link rel="stylesheet" href="{% static 'css/user/user_tables.css' %}">

{% endblock %}

{% block content %}
<div class="view-picklist-container">

  <!-- Header -->
  <div class="header-section">
    <h1>
      <span>{% trans "Pick" %}</span> {% trans "List" %}
      <small class="order-id">#{{ picklist.order.order_no }}</small>
    </h1>

    <div class="header-actions">
      {% if picklist.status != "COMPLETED" %}

      <a href="{% url 'warehouse_manager:complete_picklist' picklist.id %}" class="stock-add-btn">
        <i class="bi bi-check-circle"></i> {% trans "Mark as Completed" %}
      </a>
      {% endif %}

      <a href="javascript:history.back()" class="btn-back">
        <i class="bi bi-arrow-left"></i> {% trans "Back" %}
      </a>
    </div>
  </div>

  <!-- Picklist Info -->
  <div class="info-card">
    <p><strong>{% trans "Status:" %}</strong> 
      <span class="status {{ picklist.status|lower }}">{{ picklist.status }}</span>
    </p>
<p><strong>{% trans "Generated By:" %}</strong> {{ picklist.created_by }}</p>
<p><strong>{% trans "Generated On:" %}</strong> {{ picklist.created_at|date:"Y-m-d H:i" }}</p>

  </div>

  <!-- Table -->
  <div class="table-scroll-wrapper">
    <div class="table-container">
        <table class="table-content" id="tableContent">
          <thead>
            <tr>
              <th>{% trans "Product" %}</th>
              <th>{% trans "Batch No" %}</th>
              <th>{% trans "Expiry Date" %}</th>
              <th>{% trans "Location" %}</th>
              <th>{% trans "Quantity" %}</th>
            </tr>
          </thead>
          <tbody>
            {% for item in picklist.items.all %}
            <tr>
              <td>{{ item.order_item.product.name }}</td>
              <td>{{ item.batch_no }}</td>
              <td>{{ item.expiry_date|default:"-" }}</td>
              <td>{{ item.location|default:"-" }}</td>
              <td>{{ item.quantity }}</td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="5" class="no-data">{% trans "No items in picklist." %}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
        
    </div>
    <!-- Pagination Controls -->
    <div class="pagination-container" id="tablePagination"></div>
  </div>
</div>
{% endblock %}


{% block scripts %}
<script src="{% static 'js/user/user_tables.js' %}"></script>
{% endblock %}
