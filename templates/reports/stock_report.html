{% extends "base.html" %}
{% load static %}

{% block title %}{% trans "Stock Report" %}{% endblock %}

{% block content %}
<div class="container-fluid mt-4 px-4">
  <div class="card shadow-lg border-0">
    <div class="card-header bg-primary text-white text-center">
      <h4 class="fw-bold mb-0">ðŸ“¦ {% trans "Stock Report" %}</h4>
    </div>

    <div class="card-body">
      <!-- Top Controls -->
      <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap">
        <p class="mb-0 fw-semibold text-muted">{% trans "Total Items:" %} {{ stocks|length }}</p>

        <div class="d-flex align-items-center">
          <a href="{% url 'stock_report_excel' %}" class="btn btn-success btn-sm me-2">
            <i class="bi bi-file-earmark-excel"></i> {% trans "Download Excel" %}
          </a>
          <a href="{% url 'stock_report_pdf' %}" class="btn btn-danger btn-sm">
            <i class="bi bi-file-earmark-pdf"></i> {% trans "Download PDF" %}
          </a>
        </div>
      </div>

      <p class="text-end mb-3">
        <small><i class="bi bi-clock"></i> {% trans "Generated on:" %} {{ generated_on|date:"d M Y, H:i" }}</small>
      </p>

      <!-- Table -->
      <div class="table-responsive">
        <table class="table table-bordered table-striped text-center align-middle">
          <thead class="table-dark">
            <tr>
              <th style="width: 5%;">#</th>
              <th style="width: 15%;">{% trans "Name" %}</th>
              <th style="width: 10%;">{% trans "Category" %}</th>
              <th style="width: 15%;">{% trans "Supplier" %}</th>
              <th style="width: 8%;">{% trans "Size" %}</th>
              <th style="width: 8%;">{% trans "Color" %}</th>
              <th style="width: 10%;">{% trans "Batch No" %}</th>
              <th style="width: 10%;">{% trans "SKU" %}</th>
              <th style="width: 8%;">{% trans "Unit Price" %}</th>
              <th style="width: 8%;">{% trans "Quantity" %}</th>
              <th style="width: 8%;">{% trans "Rack" %}</th>
              <th style="width: 8%;">{% trans "Zone" %}</th>
              <th style="width: 8%;">{% trans "Shelf" %}</th>
              <th style="width: 10%;">{% trans "Expiry Date" %}</th>
              <th style="width: 8%;">{% trans "Status" %}</th>
            </tr>
          </thead>
          <tbody>
            {% for stock in stocks %}
            <tr>
              <td>{{ forloop.counter }}</td>
              <td class="fw-semibold">{{ stock.name }}</td>
              <td>{{ stock.category }}</td>
              <td>{{ stock.supplier }}</td>
              <td>{{ stock.size }}</td>
              <td>{{ stock.color }}</td>
              <td>{{ stock.batch_number }}</td>
              <td><code>{{ stock.sku }}</code></td>
              <td>{{ stock.unit_price }}</td>
              <td>{{ stock.quantity }}</td>
              <td>{{ stock.rack }}</td>
              <td>{{ stock.zone }}</td>
              <td>{{ stock.shelf }}</td>
              <td>{{ stock.expiry_date }}</td>
              <td>
                {% if stock.is_active == "Active" %}
                  <span class="badge bg-success px-3 py-2">{{ stock.is_active }}</span>
                {% else %}
                  <span class="badge bg-secondary px-3 py-2">{{ stock.is_active }}</span>
                {% endif %}
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="15" class="text-center text-muted py-4">
                {% trans "No stock records found." %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
{% endblock %}

