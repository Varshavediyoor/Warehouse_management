{% extends 'base_user.html' %}
{% load static i18n %}

{% block title %}{% trans "Category Master" %}{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/user/inventory_manager/product/category_master.css' %}">
<link rel="stylesheet" href="{% static 'css/user/user_tables.css' %}">
{% endblock %}

{% block content %}

<div class="cm-wrapper">

    <!-- Header -->
    <div class="wh-header-section">
        <div class="wh-header-left">
            <h1>
                <span>{% trans "Category " %}</span>
                {% trans " Master" %}
            </h1>
        </div>
        <div class="wh-header-right">
            <a href="javascript:history.back()" class="btn-back">
                <i class="bi bi-arrow-left"></i> {% trans "Back" %}
            </a>
        </div>
    </div>

  <!-- ================= FORM CARD ================= -->
  <div class="cm-card cm-form-card">
    <div class="cm-card-header">
      <p>{% trans "Create categories with variants and expiry rules" %}</p>
    </div>

    <div class="cm-card-body">
      <input type="hidden" id="cat_id">

      <div class="cm-form-grid">
        <div class="cm-field">
          <label>{% trans "Category Name" %}</label>
          <input id="name" placeholder="Enter category name">
        </div>

        <div class="cm-field">
          <label>{% trans "Description" %}</label>
          <input id="desc" placeholder="Short description"></input>
        </div>
      </div>

      <div class="cm-toggle">
        <label class="switch">
          <input type="checkbox" id="has_expiry">
          <span class="slider"></span>
        </label>
        <span>{% trans "Has Expiry Date" %}</span>
      </div>

      <div class="cm-variant-section">
        <div class="cm-variant-header">
          <h4>{% trans "Variants" %}</h4>
          <button class="cm-btn ghost" onclick="addVariant()">{% trans "+ Add Variant" %}</button>
        </div>

        <div id="variants" class="cm-variant-list"></div>
      </div>

      <div class="cm-actions">
        <button type="button" class="cm-btn ghost" onclick="clearForm()">
          {% trans "Clear" %}
          </button>          
        <button class="cm-btn primary" onclick="saveCategory()">
            {% trans "Save Category" %}
        </button>
      </div>
    </div>
  </div>

  <!-- ================= TABLE CARD ================= -->

    <!-- Table -->
    <div class="table-scroll-wrapper">
        <div class="table-container product">
            <table class="table-content" id="tableContent">
                <thead>
                <tr>
                    <th>{% trans "Name" %}</th>
                    <th>{% trans "Expiry" %}</th>
                    <th>{% trans "Variants" %}</th>
                    <th class="center">{% trans "Actions" %}</th>
                </tr>
                </thead>
                <tbody id="cat_table"></tbody>
            </table>

            <div id="noData" class="cm-no-data">
              {% trans "No categories found" %}
            </div>
        </div>
        <!-- Pagination Controls -->
        <div class="pagination-container" id="tablePagination"></div>
    </div>

</div>

<div id="deleteModal" class="logout-modal">
    <div class="logout-modal-content">
      <h3><span>{% trans "Delete" %}</span> {% trans "Confirmation" %}</h3>
      <p>{% trans "Are you sure you want to delete this category?" %}</p>
  
      <div class="logout-modal-buttons">
        <a id="cancelDelete" class="logout-btn-cancel">{% trans "Cancel" %}</a>
        <a id="confirmDelete" class="logout-btn-confirm">{% trans "Delete" %}</a>
      </div>
    </div>
  </div>
  

{% endblock %}

{% block scripts %}
<script src="{% static 'js/user/inventory/category_master.js' %}"></script>
<script src="{% static 'js/user/user_tables.js' %}"></script>
{% endblock %}
